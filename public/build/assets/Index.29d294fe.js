import{m as A,a4 as J,M as L,d as x,K as O,e as W,ae as Q,r,o as y,k as v,i as t,a,aa as P,ab as $,g as o,n as k,z as c,t as p,h as Y,b as Z}from"./main.2cb7c090.js";import{u as ee}from"./paintProtectionWarranty.f4baef04.js";import ae from"./BaseTable.3d765ae9.js";import{u as te}from"./global.5b7fa7f1.js";import{_ as ne}from"./MoonwalkerIcon.cc957407.js";import"./auth.38b50123.js";const le={class:"relative table-container"},me={setup(re){const{t:i}=A();J("utils"),L();const I=x(null);let B=x(!0),d=x(!1);const l=O({vehicle_sale_date:"",vin:"",owner_name:"",dealer_name:""}),_=ee(),V=te(),N=W(()=>[{key:"vehicle_sale_date",label:i("paint-protection-warranties.vehicle_sale_date")},{key:"vin",label:i("paint-protection-warranties.vin")},{key:"owner_name",label:i("paint-protection-warranties.owner_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"owner_address",label:i("paint-protection-warranties.owner_address")},{key:"vehicle_price",label:i("paint-protection-warranties.vehicle_price")},{key:"dealer_name",label:i("paint-protection-warranties.dealer_name")},{key:"contract_price",label:i("paint-protection-warranties.contract_price")},{key:"actions",thClass:"text-right",tdClass:"text-right text-sm font-medium",sortable:!1}]),C=W(()=>!_.totalPaintProtectionWarranties&&!B.value);Q(l,()=>{T()},{debounce:500});function E(){I.value.refresh()}function T(){E()}function D(){l.vehicle_sale_date="",l.vin="",l.owner_name="",l.dealer_name=""}function U(){d.value&&D(),d.value=!d.value}async function z({page:n,sort:s}){let f={vehicle_sale_date:l.vehicle_sale_date,vin:l.vin,owner_name:l.owner_name,dealer_name:l.dealer_name,orderByField:s.fieldName||"created_at",orderBy:s.order||"desc",page:n};B.value=!0;let m=await _.fetchPaintProtectionWarranties(f,V.companySlug);return B.value=!1,{data:m.data.data,pagination:{totalPages:m.data.meta.last_page,currentPage:n,totalCount:m.data.meta.total,limit:20}}}return(n,s)=>{const f=r("BaseBreadcrumbItem"),m=r("BaseBreadcrumb"),u=r("BaseIcon"),F=r("BaseButton"),b=r("router-link"),G=r("BasePageHeader"),H=r("BaseDatePicker"),w=r("BaseInputGroup"),g=r("BaseInput"),M=r("BaseFilterWrapper"),j=r("BaseEmptyPlaceholder"),h=r("BaseText"),S=r("BaseFormatMoney"),K=r("BaseDropdownItem"),R=r("BaseDropdown"),X=r("BasePage");return y(),v(X,null,{default:t(()=>[a(G,{title:n.$t("paint-protection-warranties.title")},{actions:t(()=>[P(a(F,{variant:"primary-outline",onClick:U},{right:t(e=>[o(d)?(y(),v(u,{key:1,name:"XIcon",class:k(e.class)},null,8,["class"])):(y(),v(u,{key:0,name:"FilterIcon",class:k(e.class)},null,8,["class"]))]),default:t(()=>[c(p(n.$t("general.filter"))+" ",1)]),_:1},512),[[$,o(_).totalPaintProtectionWarranties]]),a(b,{to:"paint-protection-warranties/create"},{default:t(()=>[a(F,{variant:"primary",class:"ml-4"},{left:t(e=>[a(u,{name:"PlusIcon",class:k(e.class)},null,8,["class"])]),default:t(()=>[c(" "+p(n.$t("paint-protection-warranties.new_paint-protection-warranty")),1)]),_:1})]),_:1})]),default:t(()=>[a(m,null,{default:t(()=>[a(f,{title:n.$t("general.home"),to:`/${o(V).companySlug}/customer/dashboard`},null,8,["title","to"]),a(f,{title:n.$tc("paint-protection-warranties.paint-protection-warranty",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),P(a(M,{onClear:D},{default:t(()=>[a(w,{label:n.$t("paint-protection-warranties.vehicle_sale_date"),class:"px-3"},{default:t(()=>[a(H,{modelValue:o(l).vehicle_sale_date,"onUpdate:modelValue":s[0]||(s[0]=e=>o(l).vehicle_sale_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:n.$t("paint-protection-warranties.vin"),class:"px-3"},{default:t(()=>[a(g,{modelValue:o(l).vin,"onUpdate:modelValue":s[1]||(s[1]=e=>o(l).vin=e),placeholder:n.$t("paint-protection-warranties.vin")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(w,{label:n.$t("paint-protection-warranties.owner_name"),class:"px-3"},{default:t(()=>[a(g,{modelValue:o(l).owner_name,"onUpdate:modelValue":s[2]||(s[2]=e=>o(l).owner_name=e),placeholder:n.$t("paint-protection-warranties.owner_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(w,{label:n.$t("paint-protection-warranties.dealer_name"),class:"px-3"},{default:t(()=>[a(g,{modelValue:o(l).dealer_name,"onUpdate:modelValue":s[3]||(s[3]=e=>o(l).dealer_name=e),placeholder:n.$t("paint-protection-warranties.dealer_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},512),[[$,o(d)]]),o(C)?(y(),v(j,{key:0,title:n.$t("paint-protection-warranties.no_paint-protection-warranty"),description:n.$t("paint-protection-warranties.list_of_paint-protection-warranties")},{default:t(()=>[a(ne,{class:"mt-5 mb-4"})]),_:1},8,["title","description"])):Y("",!0),P(Z("div",le,[a(ae,{ref:(e,q)=>{q.table=e,I.value=e},data:z,columns:o(N),"placeholder-count":o(_).totalPaintProtectionWarranties>=20?10:5,class:"mt-10"},{"cell-vehicle_sale_date":t(({row:e})=>[c(p(e.data.formatted_vehicle_sale_date),1)]),"cell-vin":t(({row:e})=>[c(p(e.data.vin),1)]),"cell-owner_name":t(({row:e})=>[a(b,{to:{path:`paint-protection-warranties/${e.data.id}/view`},class:"font-medium text-primary-500"},{default:t(()=>[a(h,{text:e.data.owner_name,length:30,tag:"span",class:"font-medium text-primary-500 flex flex-col"},null,8,["text"]),a(h,{text:e.data.owner_primary_phone?e.data.owner_primary_phone:"",length:30,tag:"span",class:"text-xs text-gray-400"},null,8,["text"])]),_:2},1032,["to"])]),"cell-owner_address":t(({row:e})=>[c(p(e.data.owner_address),1)]),"cell-vehicle_price":t(({row:e})=>[a(S,{amount:e.data.vehicle_price,currency:e.data.customer.currency},null,8,["amount","currency"])]),"cell-dealer_name":t(({row:e})=>[a(h,{text:e.data.dealer_name,length:30,tag:"span",class:"font-medium text-primary-500 flex flex-col"},null,8,["text"]),a(h,{text:e.data.dealer_primary_phone?e.data.dealer_primary_phone:"",length:30,tag:"span",class:"text-xs text-gray-400"},null,8,["text"])]),"cell-contract_price":t(({row:e})=>[a(S,{amount:e.data.contract_price,currency:e.data.customer.currency},null,8,["amount","currency"])]),"cell-actions":t(({row:e})=>[a(R,null,{activator:t(()=>[a(u,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"})]),default:t(()=>[a(b,{to:`paint-protection-warranties/${e.data.id}/view`},{default:t(()=>[a(K,null,{default:t(()=>[a(u,{name:"EyeIcon",class:"h-5 mr-3 text-gray-600"}),c(" "+p(n.$t("general.view")),1)]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:1},8,["columns","placeholder-count"])],512),[[$,!o(C)]])]),_:1})}}};export{me as default};

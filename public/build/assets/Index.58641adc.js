import{a9 as R,u as W,m as G,at as O,M as me,p as de,N as K,a4 as Q,r as n,o as u,k as m,i as t,g as l,a,Q as g,z as B,t as f,h as w,H as pe,d as P,K as fe,e as U,ae as _e,af as ye,b as h,aa as N,ab as z,n as V,a5 as he,y as Be}from"./main.2cb7c090.js";import{_ as be}from"./SatelliteIcon.cd7ab5d0.js";const ge={props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(D){const i=D,T=R();W();const{t:b}=G(),I=O(),d=me();de();const y=K();Q("utils");function v(o){T.openDialog({title:b("general.are_you_sure"),message:b("items.confirm_delete"),yesLabel:b("general.ok"),noLabel:b("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(c=>{c&&I.deleteItem({ids:[o]}).then(_=>(_.data.success&&i.loadData&&i.loadData(),!0))})}return(o,c)=>{const _=n("BaseIcon"),k=n("BaseButton"),$=n("BaseDropdownItem"),E=n("router-link"),F=n("BaseDropdown");return u(),m(F,null,{activator:t(()=>[l(d).name==="items.view"?(u(),m(k,{key:0,variant:"primary"},{default:t(()=>[a(_,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(u(),m(_,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:t(()=>[l(y).hasAbilities(l(g).EDIT_ITEM)?(u(),m(E,{key:0,to:`/admin/items/${D.row.id}/edit`},{default:t(()=>[a($,null,{default:t(()=>[a(_,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),B(" "+f(o.$t("general.edit")),1)]),_:1})]),_:1},8,["to"])):w("",!0),l(y).hasAbilities(l(g).DELETE_ITEM)?(u(),m($,{key:1,onClick:c[0]||(c[0]=L=>v(D.row.id))},{default:t(()=>[a(_,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),B(" "+f(o.$t("general.delete")),1)]),_:1})):w("",!0)]),_:1})}}},Ie={class:"flex items-center justify-end space-x-5"},ve={class:"relative table-container"},ke={class:"relative flex items-center justify-end h-5 border-gray-200 border-solid"},Ce={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},we={class:"absolute items-center left-6 top-2.5 select-none"},De={class:"relative block"},Ve={setup(D){Q("utils");const i=O(),T=pe();W();const b=R(),I=K(),{t:d}=G();let y=P(!1),v=P(!0);const o=fe({name:"",unit_id:"",price:""}),c=P(null),_=U(()=>!i.totalItems&&!v.value),k=U({get:()=>i.selectedItems,set:s=>i.selectItem(s)}),$=U(()=>[{key:"status",thClass:"extra w-10",tdClass:"font-medium text-gray-900",placeholderClass:"w-10",sortable:!1},{key:"name",label:d("items.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"unit_name",label:d("items.unit")},{key:"price",label:d("items.price")},{key:"created_at",label:d("items.added_on")},{key:"actions",thClass:"text-right",tdClass:"text-right text-sm font-medium",sortable:!1}]);_e(o,()=>{X()},{debounce:500}),i.fetchItemUnits({limit:"all"}),ye(()=>{i.selectAllField&&i.selectAllItems()});function E(){o.name="",o.unit_id="",o.price=""}function F(){return I.hasAbilities([g.DELETE_ITEM,g.EDIT_ITEM])}function L(){y.value&&E(),y.value=!y.value}function j(){c.value&&c.value.refresh()}function X(){j()}async function q(s){return(await i.fetchItemUnits({search:s})).data.data}async function J({page:s,filter:r,sort:C}){let M={search:o.name,unit_id:o.unit_id!==null?o.unit_id:"",price:Math.round(o.price*100),orderByField:C.fieldName||"created_at",orderBy:C.order||"desc",page:s};v.value=!0;let p=await i.fetchItems(M);return v.value=!1,{data:p.data.data,pagination:{totalPages:p.data.meta.last_page,currentPage:s,totalCount:p.data.meta.total,limit:10}}}function Y(){b.openDialog({title:d("general.are_you_sure"),message:d("items.confirm_delete",2),yesLabel:d("general.ok"),noLabel:d("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(s=>{s&&i.deleteMultipleItems().then(r=>{r.data.success&&c.value&&c.value.refresh()})})}return(s,r)=>{const C=n("BaseBreadcrumbItem"),M=n("BaseBreadcrumb"),p=n("BaseIcon"),S=n("BaseButton"),Z=n("BasePageHeader"),ee=n("BaseInput"),x=n("BaseInputGroup"),te=n("BaseMultiselect"),ae=n("BaseMoney"),le=n("BaseFilterWrapper"),se=n("BaseEmptyPlaceholder"),ne=n("BaseDropdownItem"),oe=n("BaseDropdown"),H=n("BaseCheckbox"),ie=n("router-link"),re=n("BaseFormatMoney"),ce=n("BaseTable"),ue=n("BasePage");return u(),m(ue,null,{default:t(()=>[a(Z,{title:s.$t("items.title")},{actions:t(()=>[h("div",Ie,[N(a(S,{variant:"primary-outline",onClick:L},{right:t(e=>[l(y)?(u(),m(p,{key:1,name:"XIcon",class:V(e.class)},null,8,["class"])):(u(),m(p,{key:0,class:V(e.class),name:"FilterIcon"},null,8,["class"]))]),default:t(()=>[B(f(s.$t("general.filter"))+" ",1)]),_:1},512),[[z,l(i).totalItems]]),l(I).hasAbilities(l(g).CREATE_ITEM)?(u(),m(S,{key:0,onClick:r[0]||(r[0]=e=>s.$router.push("/admin/items/create"))},{left:t(e=>[a(p,{name:"PlusIcon",class:V(e.class)},null,8,["class"])]),default:t(()=>[B(" "+f(s.$t("items.add_item")),1)]),_:1})):w("",!0)])]),default:t(()=>[a(M,null,{default:t(()=>[a(C,{title:s.$t("general.home"),to:"dashboard"},null,8,["title"]),a(C,{title:s.$tc("items.item",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),a(le,{show:l(y),class:"mt-5",onClear:E},{default:t(()=>[a(x,{label:s.$tc("items.name"),class:"text-left"},{default:t(()=>[a(ee,{modelValue:l(o).name,"onUpdate:modelValue":r[1]||(r[1]=e=>l(o).name=e),type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),a(x,{label:s.$tc("items.unit"),class:"text-left"},{default:t(()=>[a(te,{modelValue:l(o).unit_id,"onUpdate:modelValue":r[2]||(r[2]=e=>l(o).unit_id=e),placeholder:s.$t("items.select_a_unit"),"value-prop":"id","track-by":"name","filter-results":!1,label:"name","resolve-on-load":"",delay:500,searchable:"",class:"w-full",options:q},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(x,{class:"text-left",label:s.$tc("items.price")},{default:t(()=>[a(ae,{modelValue:l(o).price,"onUpdate:modelValue":r[3]||(r[3]=e=>l(o).price=e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["show"]),N(a(se,{title:s.$t("items.no_items"),description:s.$t("items.list_of_items")},{actions:t(()=>[l(I).hasAbilities(l(g).CREATE_ITEM)?(u(),m(S,{key:0,variant:"primary-outline",onClick:r[4]||(r[4]=e=>s.$router.push("/admin/items/create"))},{left:t(e=>[a(p,{name:"PlusIcon",class:V(e.class)},null,8,["class"])]),default:t(()=>[B(" "+f(s.$t("items.add_new_item")),1)]),_:1})):w("",!0)]),default:t(()=>[a(be,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[z,l(_)]]),N(h("div",ve,[h("div",ke,[l(i).selectedItems.length?(u(),m(oe,{key:0},{activator:t(()=>[h("span",Ce,[B(f(s.$t("general.actions"))+" ",1),a(p,{name:"ChevronDownIcon"})])]),default:t(()=>[a(ne,{onClick:Y},{default:t(()=>[a(p,{name:"TrashIcon",class:"mr-3 text-gray-600"}),B(" "+f(s.$t("general.delete")),1)]),_:1})]),_:1})):w("",!0)]),a(ce,{ref:(e,A)=>{A.table=e,c.value=e},data:J,columns:l($),"placeholder-count":l(i).totalItems>=20?10:5,class:"mt-3"},he({header:t(()=>[h("div",we,[a(H,{modelValue:l(i).selectAllField,"onUpdate:modelValue":r[5]||(r[5]=e=>l(i).selectAllField=e),variant:"primary",onChange:l(i).selectAllItems},null,8,["modelValue","onChange"])])]),"cell-status":t(({row:e})=>[h("div",De,[a(H,{id:e.id,modelValue:l(k),"onUpdate:modelValue":r[6]||(r[6]=A=>Be(k)?k.value=A:null),value:e.data.id},null,8,["id","modelValue","value"])])]),"cell-name":t(({row:e})=>[a(ie,{to:{path:`items/${e.data.id}/edit`},class:"font-medium text-primary-500"},{default:t(()=>[B(f(e.data.name),1)]),_:2},1032,["to"])]),"cell-unit_name":t(({row:e})=>[h("span",null,f(e.data.unit?e.data.unit.name:"-"),1)]),"cell-price":t(({row:e})=>[a(re,{amount:e.data.price,currency:l(T).selectedCompanyCurrency},null,8,["amount","currency"])]),"cell-created_at":t(({row:e})=>[h("span",null,f(e.data.formatted_created_at),1)]),_:2},[F()?{name:"cell-actions",fn:t(({row:e})=>[a(ge,{row:e.data,table:c.value,"load-data":j},null,8,["row","table"])])}:void 0]),1032,["columns","placeholder-count"])],512),[[z,!l(_)]])]),_:1})}}};export{Ve as default};

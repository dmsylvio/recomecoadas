import{Z as r,A as l,$ as n,u as d}from"./main.2cb7c090.js";const m=(p=!1)=>{const u=p?window.pinia.defineStore:r,{global:c}=window.i18n;return u({id:"plains",state:()=>({plains:[],totalPlains:0,selectAllField:!1,selectedPlains:[],plainEmployees:[],currentPlain:{id:null,employee_id:null,customer_id:null,due_date:"",vin:"",make:"",model:"",notes:""}}),getters:{isEdit:t=>!!t.currentPlain.id},actions:{resetCurrentPlain(){this.currentPlain={employee_id:"",customer_id:"",due_date:"",vin:"",make:"",model:"",notes:""}},fetchPlains(t){return new Promise((i,s)=>{l.get("/api/v1/plains",{params:t}).then(e=>{this.plains=e.data.data,this.totalPlains=e.data.meta.plain_total_count,i(e)}).catch(e=>{n(e),s(e)})})},fetchPlain(t){return new Promise((i,s)=>{l.get(`/api/v1/plains/${t}`).then(e=>{e.data&&Object.assign(this.currentPlain,e.data.data),i(e)}).catch(e=>{n(e),s(e)})})},addPlain(t){return new Promise((i,s)=>{l.post("/api/v1/plains",t).then(e=>{const a=d();this.plains.push(e.data.data),a.showNotification({type:"success",message:c.t("plains.created_message")}),i(e)}).catch(e=>{n(e),s(e)})})},updatePlain(t){return new Promise((i,s)=>{l.put(`/api/v1/plains/${t.id}`,t).then(e=>{e.data&&d().showNotification({type:"success",message:c.t("plains.updated_message")}),i(e)}).catch(e=>{n(e),s(e)})})},deletePlain(t){const i=d();return new Promise((s,e)=>{l.post("/api/v1/plains/delete",t).then(a=>{let o=this.plains.findIndex(h=>h.id===t);this.plains.splice(o,1),i.showNotification({type:"success",message:c.tc("plains.deleted_message",1)}),s(a)}).catch(a=>{n(a),e(a)})})},deleteMultiplePlains(){const t=d();return new Promise((i,s)=>{l.post("/api/v1/plains/delete",{ids:this.selectedPlains}).then(e=>{this.selectedPlains.forEach(a=>{let o=this.plains.findIndex(h=>h.id===a.id);this.plains.splice(o,1)}),t.showNotification({type:"success",message:c.tc("plains.deleted_message",2)}),i(e)}).catch(e=>{n(e),s(e)})})},selectPlain(t){this.selectedPlains=t,this.selectedPlains.length===this.plains.length?this.selectAllField=!0:this.selectAllField=!1},selectAllPlains(t){if(this.selectedPlains.length===this.plains.length)this.selectedPlains=[],this.selectAllField=!1;else{let i=this.plains.map(s=>s.id);this.selectedPlains=i,this.selectAllField=!0}},fecthEmployees(t){return new Promise((i,s)=>{l.get("/api/v1/users",{params:t}).then(e=>{this.plainEmployees=e.data.data,i(e)}).catch(e=>{n(e),s(e)})})}}})()};export{m as u};

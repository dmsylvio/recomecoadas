import{Z as N,A as n,$ as a,u as h}from"./main.2cb7c090.js";const m=(r=!1)=>{const u=r?window.pinia.defineStore:N,{global:l}=window.i18n;return u({id:"notations",state:()=>({notations:[],totalNotations:0,selectAllField:!1,selectedNotations:[],currentNotation:{id:null,customer_id:"",note_date:"",note:""}}),getters:{isEdit:e=>!!e.currentNotation.id},actions:{resetCurrentNotation(){this.currentNotation={id:"",customer_id:"",note_date:"",note:""}},fecthNotations(e){return new Promise((o,i)=>{n.get("/api/v1/notations",{params:e}).then(t=>{this.notations=t.data.data,this.totalNotations=t.data.meta.notation_total_count,o(t)}).catch(t=>{a(t),i(t)})})},fetchNotation(e){return new Promise((o,i)=>{n.get(`/api/v1/notations/${e}`).then(t=>{t.data&&Object.assign(this.currentNotation,t.data.data),o(t)}).catch(t=>{a(t),i(t)})})},addNotation(e){return new Promise((o,i)=>{n.post("/api/v1/notations",e).then(t=>{const s=h();this.notations.push(t.data.data),s.showNotification({type:"success",message:l.t("notations.created_message")}),o(t)}).catch(t=>{a(t),i(t)})})},updateNotation(e){return new Promise((o,i)=>{n.put(`/api/v1/notations/${e.id}`,e).then(t=>{if(t.data){const s=h();let c=this.notations.findIndex(d=>d.id===t.data.data.id);this.notations[c]=e.item,s.showNotification({type:"success",message:l.t("notations.updated_message")})}o(t)}).catch(t=>{a(t),i(t)})})},deleteNotation(e){const o=h();return new Promise((i,t)=>{n.post("/api/v1/notations/delete",e).then(s=>{let c=this.notations.findIndex(d=>d.id===e);this.notations.splice(c,1),o.showNotification({type:"success",message:l.tc("notations.deleted_message",1)}),i(s)}).catch(s=>{a(s),t(s)})})},deleteMultipleNotations(){const e=h();return new Promise((o,i)=>{n.post("/api/v1/notations/delete",{ids:this.selectedNotations}).then(t=>{this.selectedNotations.forEach(s=>{let c=this.notations.findIndex(d=>d.id===s.id);this.notations.splice(c,1)}),e.showNotification({type:"success",message:l.tc("notations.deleted_message",2)}),o(t)}).catch(t=>{a(t),i(t)})})},selectNotation(e){this.selectedNotations=e,this.selectedNotations.length===this.notations.length?this.selectAllField=!0:this.selectAllField=!1},selectAllNotations(e){if(this.selectedNotations.length===this.notations.length)this.selectedNotations=[],this.selectAllField=!1;else{let o=this.notations.map(i=>i.id);this.selectedNotations=o,this.selectAllField=!0}}}})()};export{m as u};
